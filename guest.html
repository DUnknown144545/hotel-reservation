<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guest Dashboard - Hotel Reservation</title>
  <link rel="stylesheet" href="style.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    /* ===== Base Layout ===== */
    body {
      display: flex;
      min-height: 100vh;
      background: #f5f6fa;
      margin: 0;
      font-family: Arial, sans-serif;
    }

    /* ===== Sidebar ===== */
    .sidebar {
      width: 220px;
      background: #2f3640;
      color: white;
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .sidebar h3 { text-align: center; margin-bottom: 20px; }

    .sidebar a {
      color: white;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 0;
      border-radius: 5px;
      transition: background 0.3s;
    }

    .sidebar a.active,
    .sidebar a:hover {
      background: #40739e;
    }

    .sidebar i {
      width: 20px;
      text-align: center;
      font-size: 16px;
    }

    .bottom {
      border-top: 1px solid rgba(255,255,255,0.2);
      padding-top: 10px;
    }

    /* ===== Main Content ===== */
    .main-content {
      padding: 20px;
      flex: 1;
      overflow-y: auto;
    }

    section { display: none; }
    section.active { display: block; }

    /* ===== Calendar & Cards ===== */
    .calendar-section {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 20px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .calendar {
      background: white;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 500px;
    }

    .calendar h3 { text-align: center; margin-bottom: 10px; }

    .calendar table { width: 100%; border-collapse: collapse; text-align: center; }

    .calendar th, .calendar td {
      width: 14.2%;
      border: 1px solid #ddd;
      padding: 6px;
      height: 35px;
      font-size: 14px;
    }

    .calendar th { background: #40739e; color: white; }
    .calendar td.today { background: #dcdde1; font-weight: bold; color: #2f3640; }

    .dashboard-cards {
      display: flex;
      flex-direction: column;
      gap: 15px;
      width: 500px;
    }

    .card {
      background: white;
      border-radius: 10px;
      padding: 48px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
      text-align: center;
    }

    .card h4 { margin-bottom: 5px; color: #40739e; display: flex; justify-content: center; align-items: center; gap: 8px; }
    .card i { color: #40739e; font-size: 20px; }
    .card p { font-size: 20px; font-weight: bold; }

    /* ===== Room Gallery ===== */
    .room-gallery {
      display: flex;
      gap: 20px;
      margin-top: 30px;
      flex-wrap: wrap;
    }

    .room {
      background: white;
      border-radius: 10px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
      padding: 10px;
      width: 30%;
      min-width: 220px;
    }

    .room img {
      width: 100%;
      height: 120px;
      object-fit: cover;
      border-radius: 8px;
    }

    .room button {
      background: #40739e;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 5px;
      margin-top: 8px;
      cursor: pointer;
      width: 100%;
    }

    .room button:hover { background: #2f3640; }

    /* ===== Availability Table ===== */
    .availability-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 25px;
    }

    .availability-table th, .availability-table td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: center;
    }

    .availability-table th {
      background-color: #40739e;
      color: white;
    }

    .availability-available { color: green; font-weight: bold; }
    .availability-limited { color: orange; font-weight: bold; }
    .availability-full { color: red; font-weight: bold; }

    /* ===== Payment Section ===== */
    .payment-form {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
      max-width: 400px;
      margin-top: 20px;
    }

    .payment-form select, .payment-form button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    .payment-form button {
      background: #40739e;
      color: white;
      border: none;
      cursor: pointer;
    }

    .payment-form button:hover { background: #2f3640; }

    /* ===== Payment Table ===== */
    .payment-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 25px;
    }

    .payment-table th, .payment-table td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: center;
    }

    .payment-table th {
      background-color: #40739e;
      color: white;
    }

    .status-paid { color: green; font-weight: bold; }
    .status-pending { color: orange; font-weight: bold; }
    .status-confirmed { color: green; font-weight: bold; }

    .payment-option {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .payment-option i {
      color: #40739e;
    }
  </style>
</head>

<body>
  <div class="sidebar">
    <div>
      <h3>Guest</h3>
      <a href="#" class="active" onclick="showSection('dashboard', this)"><i class="fa-solid fa-gauge"></i> Dashboard</a>
      <a href="#" onclick="showSection('bookingRecord', this)"><i class="fa-solid fa-calendar-check"></i> Booking Record</a>
      <a href="#" onclick="showSection('payment', this)"><i class="fa-solid fa-credit-card"></i> Payment Method</a>
      <a href="#" onclick="showSection('profile', this)"><i class="fa-solid fa-user"></i> Profile</a>
    </div>
    <div class="bottom">
      <p id="guestName"></p>
      <a href="#" onclick="logout()"><i class="fa-solid fa-right-from-bracket"></i> Logout</a>
    </div>
  </div>

  <div class="main-content">
    <!-- ===== DASHBOARD ===== -->
    <section id="dashboard" class="active">
      <h2>Dashboard</h2>
      <div class="calendar-section">
        <div class="calendar">
          <h3 id="calendarTitle"></h3>
          <table id="calendarTable">
            <thead>
              <tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr>
            </thead>
            <tbody id="calendarBody"></tbody>
          </table>
        </div>
        <div class="dashboard-cards">
          <div class="card">
            <h4><i class="fa-solid fa-calendar-check"></i> Bookings</h4>
            <p>2</p>
          </div>
          <div class="card">
            <h4><i class="fa-solid fa-bed"></i> Upcoming Stays</h4>
            <p>1</p>
          </div>
        </div>
      </div>

      <h3 style="margin-top: 40px;">Available Rooms</h3>
      <div class="room-gallery">
        <div class="room">
          <img src="https://images.unsplash.com/photo-1560185127-6ed189bf02f4" alt="Single Room">
          <h4>Single Room</h4><p>$50 / night</p>
          <button onclick="bookRoom('Single Room')">Book Now</button>
        </div>
        <div class="room">
          <img src="https://images.unsplash.com/photo-1505691938895-1758d7feb511" alt="Double Room">
          <h4>Double Room</h4><p>$80 / night</p>
          <button onclick="bookRoom('Double Room')">Book Now</button>
        </div>
        <div class="room">
          <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c" alt="Suite">
          <h4>Suite</h4><p>$120 / night</p>
          <button onclick="bookRoom('Suite')">Book Now</button>
        </div>
      </div>

      <h3 style="margin-top: 30px;">Room Availability</h3>
      <table class="availability-table">
        <thead>
          <tr>
            <th>Room Type</th>
            <th>Total Rooms</th>
            <th>Booked</th>
            <th>Available</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>Single Room</td><td>10</td><td>4</td><td>6</td><td class="availability-available">Available</td></tr>
          <tr><td>Double Room</td><td>8</td><td>7</td><td>1</td><td class="availability-limited">Limited</td></tr>
          <tr><td>Suite</td><td>5</td><td>5</td><td>0</td><td class="availability-full">Fully Booked</td></tr>
        </tbody>
      </table>
    </section>

    <!-- ===== PAYMENT SECTION ===== -->
    <section id="payment">
      <h2>Payment Method</h2>
      <div class="payment-form">
        <p><strong>Selected Room:</strong> <span id="selectedRoom">None</span></p>
        <label>Select Payment Method:</label>
        <select id="paymentSelect">
          <option value="">-- Select Payment Method --</option>
          <option value="Visa">ðŸ’³ Visa</option>
          <option value="MasterCard">ðŸ’³ MasterCard</option>
          <option value="GCash">ðŸ“± GCash</option>
        </select>
        <button onclick="confirmPayment()"><i class="fa-solid fa-circle-check"></i> Confirm Payment</button>
      </div>

      <h3 style="margin-top: 30px;">Payment Records</h3>
      <table class="payment-table">
        <thead>
          <tr>
            <th>Payment ID</th>
            <th>Room Type</th>
            <th>Amount</th>
            <th>Method</th>
            <th>Date</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody id="paymentRecords">
          <tr><td>#P-001</td><td>Single Room</td><td>$100</td><td><i class="fa-brands fa-cc-visa"></i> Visa</td><td>Nov 5, 2025</td><td class="status-paid">Paid</td></tr>
          <tr><td>#P-002</td><td>Double Room</td><td>$80</td><td><i class="fa-solid fa-mobile-screen-button"></i> GCash</td><td>Nov 6, 2025</td><td class="status-pending">Pending</td></tr>
        </tbody>
      </table>
    </section>

    <!-- ===== BOOKING RECORD ===== -->
    <section id="bookingRecord">
      <h2>My Booking Record</h2>
      <table class="booking-table">
        <thead><tr><th>Booking ID</th><th>Room Type</th><th>Check-in</th><th>Check-out</th><th>Status</th></tr></thead>
        <tbody>
          <tr><td>#1001</td><td>Single Room</td><td>Nov 5, 2025</td><td>Nov 7, 2025</td><td class="status-confirmed">Confirmed</td></tr>
        </tbody>
      </table>
    </section>

    <!-- ===== PROFILE ===== -->
    <section id="profile">
      <h2>My Profile</h2>
      <p><strong>Username:</strong> <span id="username"></span></p>
      <p><strong>Role:</strong> Guest</p>
    </section>
  </div>

  <script>
    const user = JSON.parse(localStorage.getItem("loggedInUser")) || {};
    document.getElementById("guestName").innerText = user.username || "Guest";
    document.getElementById("username").innerText = user.username || "Guest";

    let selectedRoom = null;

    function showSection(id, el) {
      document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
      document.getElementById(id).classList.add("active");
      document.querySelectorAll(".sidebar a").forEach(a => a.classList.remove("active"));
      if (el) el.classList.add("active");
    }

    function logout() {
      localStorage.removeItem("loggedInUser");
      window.location.href = "index.html";
    }

    function bookRoom(roomType) {
      selectedRoom = roomType;
      document.getElementById("selectedRoom").textContent = roomType;
      showSection("payment");
      alert(`You selected ${roomType}. Please proceed with payment.`);
    }

    function confirmPayment() {
      const paymentMethod = document.getElementById("paymentSelect").value;
      if (!paymentMethod) return alert("Please select a payment method.");
      const table = document.getElementById("paymentRecords");
      const newRow = document.createElement("tr");
      let icon = "";
      if (paymentMethod === "Visa") icon = '<i class="fa-brands fa-cc-visa"></i>';
      else if (paymentMethod === "MasterCard") icon = '<i class="fa-brands fa-cc-mastercard"></i>';
      else if (paymentMethod === "GCash") icon = '<i class="fa-solid fa-mobile-screen-button"></i>';

      newRow.innerHTML = `
        <td>#P-${Math.floor(Math.random() * 900 + 100)}</td>
        <td>${selectedRoom}</td>
        <td>$${selectedRoom === "Suite" ? 120 : selectedRoom === "Double Room" ? 80 : 50}</td>
        <td>${icon} ${paymentMethod}</td>
        <td>${new Date().toLocaleDateString()}</td>
        <td class="status-paid">Paid</td>`;
      table.appendChild(newRow);

      alert(`Payment confirmed via ${paymentMethod} for ${selectedRoom}.`);
      showSection("bookingRecord");
    }

    function generateCalendar() {
      const today = new Date();
      const month = today.getMonth();
      const year = today.getFullYear();
      const firstDay = new Date(year, month, 1);
      const lastDay = new Date(year, month + 1, 0);
      const startDay = firstDay.getDay();
      const totalDays = lastDay.getDate();
      const monthNames = ["January","February","March","April","May","June","July","August","September","October","November","December"];
      document.getElementById("calendarTitle").innerText = `${monthNames[month]} ${year}`;
      const tbody = document.getElementById("calendarBody");
      tbody.innerHTML = "";
      let date = 1;
      for (let i = 0; i < 6; i++) {
        const row = document.createElement("tr");
        for (let j = 0; j < 7; j++) {
          const cell = document.createElement("td");
          if (i === 0 && j < startDay) cell.textContent = "";
          else if (date > totalDays) cell.textContent = "";
          else {
            cell.textContent = date;
            if (date === today.getDate()) cell.classList.add("today");
            date++;
          }
          row.appendChild(cell);
        }
        tbody.appendChild(row);
      }
    }

    generateCalendar();
  </script>
</body>
</html>
